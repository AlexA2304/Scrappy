# Scrappy App Database Tables
<img width="602" alt="db schema" src="https://github.com/jarrydallison/Colorfornia/assets/51180529/ddd62ba1-1a22-4bd3-af63-b0f589f1733b">


## Meeting Table
- Table name: meeting
- Description: Servers as the primary reference point for each meeting.
- Fields:
  * meetingID: auto-incremented integer primary key for table.
  * meetingTitle: string user input name for meeting when meeting created.
- Tests:
  * Adding a new meeting title to the table auto-increments the meetingID and correctly associates the added meeting title with the next available meetingID.
  * Querying the table for a given meetingID returns the correct meeting title.
  * Querying the table for a given meeting title returns a valid meetingID.
  * Cannot add meetingID manually (must auto-increment).
  * Cannot add blank meetingTitle.
  * Can only add appropriate data type to each respective field.

## Attendee Table
- Table name: attendee
- Description: table correlating users with a specific meeting. Keeps track of which users were in which meetings.
- Fields:
  * userName: string primary key for table and foreign key from userlogin table. It is the unique name created by a given user during account creation.
  * meetingID: integer foreign key from meeting table associates a given user with a particular meeting.
- Tests:
  * Adding a valid username and meetingID correctly associates the passed in userName and meetingID.
  * Querying the table for a given userName returns the correct meetingID
  * Querying the table for a valid meetingID returns all users associated with that meetingID.
  * Can only add a userName that already exists in the userlogin table.
  * Can only add a meetingID that already exists in the meeting table.
  * Cannot add an empty userName of meetingID.
  * Can only add appropriate data type to each respective field.

## User Login Table
- Table name: userlogin
- Description: table containing an associated username and password that a user creates during sign-up.
- Fields:
  * userName: string primary key for the table that is also a foreign key in the attendee and votes tables. Unique character string created by the user at sign-up.
  * password: unique eight character string created by the user at sign-up.
- Tests:
  * Adding a userName and password to the table correctly associates the passed in username and password.
  * Querying the table for a given userName returns the correct password.
  * Cannot add duplicate userNames—each userName is unique.
  * Cannot add an empty userName.
  * Cannot add a password that is not eight characters long.
  * Can only add appropriate data type to each respective field.


## Story Table
- Table name: story
- Description: holds all of the story data that will be voted on by participants and associates a story to a given meeting.
- Fields:
  * storyID: auto-incrementing integer primary key for the table is a unique identifier for each story.
  * meetingID: integer foreign key from meeting table associates a given story with a particular meeting. Default values is null.
  * storyTitle: user generated title string of the story.
  * asA: string "As a..." portion of the story description generated by the user.
  * iWant: string "I want..." portion of the story description generated by the user.
  * soThat: string "So that..." portion of the story description generated by the user.
  * effortLevel: initially null and will be updated to the consensus value after voting completed.
- Tests:
  * Adding a story with all fields filled out correctly adds these values the table, auto-increments the storyID, defaults effortLevel and meetingID to null and correctly associates the story with a given meeting.
  * Cannot manually add a storyID.
  * Can only add a story with a meetingID that is valid in the meeting table.
  * Can update a meetingID to a valid meetingID in the meeting table.
  * Cannot add a story with empty storyTitle, asA, iWant or soThat values.
  * Can only add appropriate data type to each respective field.

## Votes Table
- Table name: votes
- Description: table that stores each users vote for a given story.
- Fields:
  * userName: string primary key for table and foreign key from userlogin table. It is the unique name created by a given user during account creation.
  * storyID: integer foreign key from the story table.
  * voteValue: integer from the Fibonacci effort scale input by user.
- Tests:
  * Adding a voteValue to the table correctly associates that vote with the user who made it and the story they were voting on.
  * Cannot add an empty vote value, storyID, or userName.
  * Can only add a storyID that is a valid storyID  in the story table.
  * Can only add a userName that is a valid userName in the userlogin table.
  * Can only add appropriate data type to each respective field.

# API endpoints (data access methods)
## Login Route
- Name: "/login"
- Description:
    * The GET method of this route returns the login page HTML.
    * The POST method of this route checks that the username and password are valid.
- Parameters:
    * The POST method Request Body Parameter is JSON data with the user entered username and password.
    * The GET method does not have any parameters.
- Return value(s):
    * The POST method returns a success or failure message depending on validity of username and password.
    * The GET method returns the page HTML.

- POST Test:
  * Use case name:
    Verify the user can login with valid username and password.
  * Description:
    Test the login page.
  * Pre-conditions:
    User has a valid username and password.
  * Test steps:
    1. Navigate to the login page
    2. Enter user name
    3. Enter password
    4. Click the login button
  * Expected Result:
    User should be shown a success message and logged in.
  * Actual Result:
    TEST NOT YET RUN.
  * Status (Pass/Fail):
    TEST NOT YET RUN.
  * Notes:
    N/A
  * Post-condition:
    Username and password are validated in the database and the user is signed-in. User is routed to Create Meeting page.


## Story Route
- Name: "/createStory"
- Description:
    * The POST method of this route takes in the story form data from the client, creates a story object from this form data, and adds the story object to the story table with a null meetingID and null effortLevel. The storyID is auto-incremented on insert.
    * The GET method of this route returns the HTML page for story form input.
- Parameters:
    * POST method Request Body Parameter is the JSON data containing the "story title", "as a", "I want", and "so that" data.
    * GET method does not have any parameters.
- Return value(s):
    * POST method returns a success or failure message based on success of the insertion operation.
- POST Test:
  * Use case name:
    Verify that the user can add a story with desired form data.
  * Description:
    Test story form input.
  * Pre-conditions:
    The user is logged in and there is an HTML form with appropriate fields and a submit button for the user to fill out and click, respectively.
  * Test steps:
    1. Navigate to Add User Story page
    2. Fill out all form fields
    3. Press submit
  * Expected Result:
    Story data is posted to the database and the user is shown a success message.
  * Actual Result:
    TEST NOT YET RUN.
  * Status (Pass/Fail):
    TEST NOT YET RUN.
  * Notes:
    N/A
  * Post-condition:
    Story is correctly added to the database and the user is prompted if they would like to add another story.

## Create Meeting Route
- Name: "/createMeeting"
- Description:
    * The GET method of this route returns the list of currently unrated stories in the database, a list of users, the next available meetingID (for client use only), and the HTML to render the page. The stories from the database will be returned where the meetingID is currently null (they have been added but not associated with a meeting yet).
    * The POST method of this route passes the list of selected attendees and the user input meeting title to the database. This creates a new entry in the meeting table, updates all of the stories to the new meetingID, and creates a new entry in the attendees table for each user with the new meetingID.
- Parameters:
    * POST method Request Body Parameter is the JSON data with the selected attendees and the meeting title.
    * GET method does not have any parameters.
- Return value(s):
    * POST method returns a success or failure message.
    * GET method returns the JSON data with the list of stories data, list of users, and next available meetingID (note: this ID will actually be auto-incremented in the database when the meeting is created so it is not necessary to pass it back to the server—it's only for user reference client-side).

- GET Test:
  * Use case name:
    Verify meeting options render correctly.
  * Description:
    Test that the dynamic aspects of the Create Meeting page are being retrieved from the database.
  * Pre-conditions:
    The user is logged in and navigates to the Create Meeting page.
  * Test steps:
    1. Navigate to the Create Meeting Page
  * Expected Result:
    User should see a list of potential users they can add to their meeting along with a list of currently unrated stories in the database.
  * Actual Result:
    TEST NOT YET RUN.
  * Status (Pass/Fail):
    TEST NOT YET RUN.
  * Notes:
    N/A
  * Post-condition:
    The user can select the attendees they would like to add to the meeting and create the meeting for those attendees and the given stories.

- POST Test:
  * Use case name:
    Verify meeting information posts to database.
  * Description:
    Test ability to create a meeting.
  * Pre-conditions:
    The GET test for the createMeeting route passes and the page is rendering correctly and the user is logged in.
  * Test steps:
    1. Navigate to the Create Meeting page
    2. Add meeting title
    3. Select user to attend meeting
    4. Press create meeting button
  * Expected Result:
    User should see a success message and be routed to the Voting page for the meeting they just created.
  * Actual Result:
    TEST NOT YET RUN.
  * Status (Pass/Fail):
    TEST NOT YET RUN.
  * Notes:
    N/A
  * Post-condition:
    The meeting table is updated with the correct meeting title. All of the attendees are added to the attendee table with the correct meetingID and all of the stories associated with this meeting have the correct meetingID.

## Voting Route
- Name: "/voting"
- Description:
    * The GET method of this route returns the list of attendees and stories for the given meeting, along with the data for the first story to be voted on. It also gets the HTML to render the page.
    * The PUT method of this route updates the consensus effort level for the story on which voting occurred.
- Parameters:
    * The PUT method Request Body Parameter is the consensus level vote.
    * The GET method parameter is the storyID.
- Return value(s):
    * The PUT method returns a success or failure message based on the success of the update operation.
    * The GET method returns the JSON story data for the story to be voted on.

- GET Test:
  * Use case name:
    Verify voting page renders correct meeting information.
  * Description:
    Test that the voting page gets the attendees for the meeting and the stories to be voted on.
  * Pre-conditions:
    The user is logged in and a meeting has been created.
  * Test steps:
    1. Navigate to the Voting page.
  * Expected Result:
    The user should see the list of attendees, stories, and the text of the first story on which they will vote.
  * Actual Result:
    TEST NOT YET RUN.
  * Status (Pass/Fail):
    TEST NOT YET RUN.
  * Notes:
    N/A
  * Post-condition:
    The user is able to click on an effort level vote for the given story.

- PUT Test:
  * Use case name:
    Verify the consensus level vote is updated.
  * Description:
    Test that once a consensus is reached, this data is stored correctly.
  * Pre-conditions:
    The user is logged in, a meeting has been created, and all users have reached the same consensus vote.
  * Test steps:
    1. Navigate to the Voting page.
    2. Vote on the current story.
    3. Ensure other meeting participants all have the same vote.
    4. Click the End Voting button.
  * Expected Result:
    The user should see the consensus effort level next to the story updated.
  * Actual Result:
    TEST NOT YET RUN.
  * Status (Pass/Fail):
    TEST NOT YET RUN.
  * Notes:
    N/A
  * Post-condition:
    The voting moves on to the next story in the queue.
